<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <title>Smart Task Analyzer â€” UI</title>
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/css/bootstrap.min.css" rel="stylesheet">
  <link href="/static/styles.css" rel="stylesheet">

</head>

<body>
  <div class="container">
    <div class="app-card">
      <div class="d-flex justify-content-between align-items-start mb-2">
        <div>
          <h4 class="mb-0">Smart Task Analyzer</h4>
          <div class="small-muted">Add tasks or paste a JSON array, analyze and save recommendations.</div>
        </div>
        <div class="small-muted text-end"><span style="background:#000; color:#ffd700; padding:4px 8px; border-radius:6px;">ðŸš€</span></div>
      </div>


      <div class="row g-3">
        <div class="col-12 col-md-6">
          <div class="card p-3">
            <h6 class="mb-2">Add single task</h6>
            <div class="mb-2">
              <input id="title" class="form-control" placeholder="Task title (required)">
            </div>
            <div class="row g-2">
              <div class="col-6"><input id="due_date" type="date" class="form-control"></div>
              <div class="col-3"><input id="estimated_hours" type="number" class="form-control" step="0.5" placeholder="hrs"></div>
              <div class="col-3"><input id="importance" type="number" class="form-control" min="1" max="10" value="5"></div>
            </div>
            <div class="mt-2">
              <input id="dependencies" class="form-control" placeholder="Dependencies (comma separated ids)">
            </div>
            <div class="mt-2 d-flex gap-2">
              <button id="addBtn" class="btn btn-primary">Add Task</button>
              <button id="clearFormBtn" class="btn btn-outline-secondary">Clear</button>
            </div>
            <div id="addStatus" class="mt-2 small-muted"></div>
          </div>
        </div>

        <div class="col-12 col-md-6">
          <div class="card p-3">
            <h6 class="mb-2">Bulk JSON input</h6>
            <textarea id="bulkInput" class="form-control" rows="6" placeholder='Paste tasks JSON array'></textarea>
            <div class="mt-2 d-flex gap-2">
              <button id="loadBulkBtn" class="btn btn-secondary">Load JSON</button>
              <button id="pasteSampleBtn" class="btn btn-outline-secondary">Sample JSON</button>
            </div>
            <div id="bulkStatus" class="mt-2 small-muted"></div>
          </div>
        </div>
      </div>


      <div class="mt-3 top-controls">
        <div class="select-bor">
        <select id="analyzeType" class="form-select w-auto">
          <option value="Fastest Wins">Fastest Wins</option>
          <option value="High Impact">High Impact</option>
          <option value="Deadline Driven">Deadline Driven</option>
          <option value="Smart Balance" selected>Smart Balance</option>
        </select>
        </div>
        <button id="analyzeBtn" class="btn btn-success">Analyze</button>
        <button id="findTodayBtn" class="btn btn-warning ms-2">Find todays task</button>


        <div class="ms-auto d-flex gap-2">
          <button id="saveRecoBtn" class="btn btn-outline-primary">Save recommendations</button>
          <button id="clearRecoBtn" class="btn btn-outline-danger">Clear recommendations</button>
          <button id="seePrevBtn" class="btn btn-outline-secondary">See previous requests</button>
        </div>
      </div>

      <hr>


      <div id="cycleStatus" class="text-danger small mb-2"></div>


      <h6 id="recTitle" style="display:none">Recommended Order</h6>
      <div id="recommended"></div>


      <div id="previousWrapper">
        <div id="previousPanel">
          <div class="d-flex align-items-center mb-2">
            <div style="flex:1"><strong>Previous saved analyses</strong></div>
            <div class="close-x btn btn-sm btn-light" id="closePrev">âœ•</div>
          </div>
          <div id="prevList" style="max-height:60vh; overflow:auto"></div>
        </div>
      </div>


      <div id="previousDataContainer" class="mt-3" style="display:none">
        <div class="card p-3">
          <div class="d-flex justify-content-between">
            <div><strong>Previous request loaded</strong></div>
            <div><button id="closeLoadedPrev" class="btn btn-sm btn-light">âœ•</button></div>
          </div>
          <div id="loadedPrevContent" style="margin-top:8px"></div>
        </div>
      </div>

      <hr>
      <div class="d-flex justify-content-between align-items-center mb-2">
        <div><strong>Current tasks (input)</strong></div>
        <div class="small-muted">Left = id â€¢ Right = score</div>
      </div>
      <button id="clearTasksBtn" class="btn btn-danger mb-2">Clear Current Tasks</button>
      <div id="tasksList" class="mb-3" style="background:#fcfcfc; padding:8px; border-radius:8px; min-height:40px"></div>

    </div>
  </div>

  <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js"></script>

  <script src="/static/script.js"></script>
</body>

</html>
